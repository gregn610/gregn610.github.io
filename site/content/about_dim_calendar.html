<html>
    <head>
        <title>Hello world</title>
        <meta name="tags" content="thats, awesome" />
        <meta name="date" content="2016-12-09 00:08" />
        <meta name="modified" content="2016-12-09 00:08" />
        <meta name="category" content="Dim_Calendar" />
        <meta name="authors" content="greg" />
        <meta name="summary" content="About Dim_Calendar" />
    </head>
<body>
<h2>Background</h2>
I wanted a <a href="https://www.postgresql.org/docs/current/static/plpgsql.html">PostgreSQL</a>
and/or Python project and public holidays for a data warehouse
calendar dimension seemed good idea. I massively under estimated scope of the undertaking
so soon set somewhat arbitary boundaries of the 1970-Jan 2038, lining up with 32 bit unix
timestamps and chose the European Union members as a set of countries to aim to complete.

<h2>Details</h2>
<div>
It started out as a table definition and a collection of update statements written in
PL/pgSQL. While looking around to implementing some kind of quality control, I
found <a href="https://github.com/novafloss/workalendar">Workalendar</a>.
This presented a decision point, either use a templating engine like Jinja to
generate SQL straight from the python library, or continue down the path I was already
on. I chose to use Django because I wanted the practice. I used it's unit testing
framework to compare the holiday dates the SQL was generating with the dates in
Workalendar. Going with Workalendar also influenced my decision to double down on
the <code>calc_</code> columns, which is a slight design compromise. The SQL
for one or more chosen country columns can't be deployed without all the
<code>calc_</code> columns being on the dim table beforehand. But the
<code>calc_</code> columns can be dropped afterwards and the consistency &amp; accuracy
benefits hopefully support the decision.
</div>
<div>
Then came hosting and I wanted simple. Initially I was going to use
<a href="https://django-bakery.readthedocs.io/en/latest/">Django-Bakery</a> to render
the site statically and host it on <a href="https://aws.amazon.com/s3/">Amazon S3</a>.
I was implementing Bakery when I lightbulbed and realized it was probably overkill.
I could just crawl my locally dev instance with <code>wget -r</code> as a sort of
build process and dump the spidered results into S3. That is quick simple and works well.
I've also put the whole lot behind <a href="https://www.cloudflare.com/">Cloudflare</a>
which, apart from the caching benefits, provides some nice high level metrics without
stalking site visitors.
</div>
<div>
The unit testing was doing what it's supposed to, uncovering bugs in my SQL. It also
highlighted some countries that weren't yet available in Workalendar. This was an opportunity
to learn the <a href="https://help.github.com/articles/about-pull-requests/">
Github pull request<a/> workflow and attempt an OSS contribution. A big thank you to
Bruno for his patience and encouragement getting my patch into shape and accepted
to master.
</div>
<div>
<a href="https://travis-ci.org/">Travis-CI</a> offers continuous integration for
Github projects so that was the next avenue to explore. It was straight forward
to get set up and quickly provides useful feedback. Dim_calendar has a few tests
failing at the moment but I'm hoping to get them all passing soon and cut a v1.0
release.
</div>
<div>
Along with getting to a v1.0 release, I'd like to give Serverless a go next and
<a href="https://www.zappa.io/">Zappa.io</a> caught my attention. Dim_Calendar
will likely be my guinea pig for that too.
</div>

</body>
</html>
